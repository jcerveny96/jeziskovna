<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8">
  <title>Kde je moje zásilka? | Dárkovna</title>
  <link rel="stylesheet" href="style.css">

  <style>
    .error {
      margin-top: 16px;
      padding: 12px;
      background: #fdecea;
      color: #b00020;
      border-radius: 6px;
      display: none;
    }
  </style>
</head>
<body>

  <header class="header">
    <h1>Dárkovna</h1>
  </header>

  <main class="container">
    <h2>Kde je moje zásilka?</h2>

    <div class="track-box">
      <input
        type="text"
        id="trackingCode"
        placeholder="Zadejte číslo zásilky"
      >
      <button id="trackBtn">Sledovat zásilku</button>
    </div>

    <div id="error" class="error"></div>

    <p class="hint">
      Příklad: <strong>DARKY123</strong> nebo <strong>LOL456</strong>
    </p>
  </main>

  <!-- Nejdřív data -->
  <script src="data.js"></script>

  <!-- Pak logika -->
  <script>
    const input = document.getElementById("trackingCode");
    const button = document.getElementById("trackBtn");
    const errorBox = document.getElementById("error");

    function showError(message) {
      errorBox.textContent = message;
      errorBox.style.display = "block";
    }

    function clearError() {
      errorBox.style.display = "none";
    }

    function track() {
      clearError();

      const code = input.value.trim();

      if (!code) {
        showError("Zadejte prosím číslo zásilky.");
        return;
      }

      if (typeof shipments === "undefined") {
        showError("Chyba načítání dat zásilek (data.js).");
        return;
      }

      if (!shipments[code]) {
        showError("Zásilka s tímto číslem nebyla nalezena.");
        return;
      }

      window.location.href =
        "track.html?code=" + encodeURIComponent(code);
    }

    button.addEventListener("click", track);

    input.addEventListener("keydown", (e) => {
      if (e.key === "Enter") {
        track();
      }
    });
  </script>

</body>
</html>
